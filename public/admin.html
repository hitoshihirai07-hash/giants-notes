<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>投稿（管理） | 読売ジャイアンツ 良かったところメモ</title>
  <meta name="description" content="管理者用ページ（検索結果には表示されません）。" />
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#f7f7f7" />
  <meta name="robots" content="noindex,nofollow" />
  <link rel="stylesheet" href="./assets/style.css" />
  <script src="./assets/seo.js" defer></script>
</head>
<body>
  <header class="wrap">
    <a class="back" href="/">← トップへ</a>
    <h1>投稿（管理）</h1>
  </header>

  <main class="wrap">
    <div class="card">
      <label class="label">管理トークン</label>
      <input id="token" class="input full" type="password" placeholder="最初に設定した ADMIN_TOKEN" />
      <div class="row">
        <button id="saveToken" class="btn" type="button">保存</button>
        <button id="clearToken" class="btn ghost" type="button">消す</button>
        <a class="btn" href="./admin-open">オープン戦成績</a>
        <a class="btn" href="/posts/">メモ一覧</a>
      </div>
      <div id="msg" class="msg" hidden></div>
      <p class="hint">※トークンはこの端末のローカル保存（localStorage）に入ります。</p>
    </div>

    <div class="tabs" style="margin-top:12px;">
      <button type="button" class="tabbtn active" data-admin-tab="post">記事作成</button>
      <button type="button" class="tabbtn" data-admin-tab="inbox">受信箱</button>
      <button type="button" class="tabbtn" data-admin-tab="manage">メモ管理</button>
    </div>

    <section id="staticTool" data-admin-panel="post" style="margin-top:12px;">
      <div class="card">
        <h2 class="h2">記事を作成（HTML）</h2>
        <div id="stMsg" class="msg" hidden></div>

        <form id="stForm" class="form">
          <div class="grid2">
            <div>
              <label class="label">タイトル（必須）</label>
              <input id="st_title" class="input full" placeholder="例：2026年キャンプの期待" />
            </div>
            <div>
              <label class="label">タグ（任意：カンマ区切り）</label>
              <input id="st_tags" class="input full" placeholder="例：キャンプ,岡本和真" />
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <label class="row" style="gap:8px; margin:0;">
              <input id="st_hidden" type="checkbox" />
              <span>このメモを一覧に出さない（非表示）</span>
            </label>
          </div>

          <div class="grid3">
            <div>
              <label class="label">日付（必須）</label>
              <input id="st_date" class="input full" type="date" />
            </div>
            <div>
              <label class="label">時間（必須）</label>
              <input id="st_time" class="input full" type="time" />
            </div>
            <div>
              <label class="label">詳細（任意）</label>
              <input id="st_info" class="input full" placeholder="例：キャンプ前メモ" />
            </div>
          </div>

          <div>
            <label class="label">本文（必須：改行で段落）</label>
            <textarea id="st_body" class="input full" rows="10" placeholder="良かった点だけメモしていきます"></textarea>
          </div>

          <div class="row">
            <button id="stPreview" class="btn ghost" type="button">プレビュー更新</button>
            <button id="stDownloadPost" class="btn" type="button">記事HTMLをダウンロード</button>
            <button id="stDownloadIndex" class="btn" type="button">一覧ファイル（index.html / posts.json）をダウンロード</button>
          </div>
          <p class="hint">
            手順：<br>
            ①「記事HTML」をダウンロード<br>
            ②「一覧ファイル（posts.json / index.html）」をダウンロード<br>
            ③ GitHub の <b>public/posts/</b> に記事HTMLと <b>index.html</b> をアップロード<br>
            ④ <b>public/posts/posts.json</b> を上書きして push（自動でデプロイ）
          </p>
        </form>
      </div>

      <div class="card" style="margin-top:12px;">
        <h2 class="h2">プレビュー</h2>
        <div id="stPreviewArea" class="preview"></div>
      </div>
    </section>

    <section data-admin-panel="inbox" style="margin-top:12px; display:none;">
      <div class="card">
        <h2 class="h2">お問い合わせ 受信箱（管理者のみ）</h2>
        <div class="row" style="margin-bottom:10px; gap:8px;">
          <button id="inboxReload" class="btn" type="button">更新</button>
        </div>
        <div id="inbox"></div>
        <p class="hint">※表示にはトークンが必要です。<br>※削除はこの画面から行えます。</p>
      </div>
    </section>

    <section data-admin-panel="manage" style="margin-top:12px; display:none;">
      <div class="card">
        <h2 class="h2">メモ管理（一覧の表示 / 非表示・削除）</h2>
        <div id="pmMsg" class="msg" hidden></div>
        <div class="row" style="margin-bottom:10px; gap:8px;">
          <button id="pmReload" class="btn" type="button">更新</button>
          <button id="pmDownload" class="btn" type="button">一覧ファイル（index.html / posts.json）をダウンロード</button>
        </div>
        <div id="pmList"></div>
        <p class="hint">
          ※「非表示」は<b>メモ一覧</b>・<b>sitemap.xml</b>・<b>IndexNow</b>の対象から外します（記事URL自体は残ります）。<br>
          ※「削除」は一覧から外すだけです（記事HTMLファイルの削除は GitHub 側で行ってください）。
        </p>
      </div>
    </section>
  </main>

  <footer class="wrap foot">
    <small>© 読売ジャイアンツ 良かったところメモ</small>
  </footer>

  <script src="./assets/admin.js"></script>
</body>
</html>
