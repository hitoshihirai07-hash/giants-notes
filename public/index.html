<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>読売ジャイアンツ 良かったところメモ</title>
  <meta name="description" content="読売ジャイアンツのメモと成績まとめ。" />
  <link rel="canonical" href="https://giants-notes.pages.dev/" />

  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#f7f7f7" />

  <meta name="robots" content="index,follow" />
  <link rel="stylesheet" href="/assets/style.css" />
  <script src="/assets/seo.js" defer></script>
</head>
<body>
  <header class="wrap">
    <h1>読売ジャイアンツ 良かったところメモ</h1>
    <nav class="nav" style="margin-top:8px;">
      <a href="/posts/">メモ一覧</a>
      <a href="/tags">タグ一覧</a>
      <a href="/stats">成績・試合結果</a>
      <a href="/about">このサイトについて</a>
      <a href="/contact">お問い合わせ</a>
    </nav>
  </header>

  <main class="wrap" style="margin-top:12px;">
    <div class="grid2">
      <a class="card" href="/posts/" style="text-decoration:none; color:inherit;">
        <h2 class="h2" style="margin:0 0 6px;">メモを見る</h2>
        <p class="hint" style="margin:0;">投稿したメモを一覧で見ます。</p>
      </a>
      <a class="card" href="/tags" style="text-decoration:none; color:inherit;">
        <h2 class="h2" style="margin:0 0 6px;">タグ一覧</h2>
        <p class="hint" style="margin:0;">タグ別にメモを見返せます。</p>
      </a>
      <a class="card" href="/stats" style="text-decoration:none; color:inherit;">
        <h2 class="h2" style="margin:0 0 6px;">成績・試合結果</h2>
        <p class="hint" style="margin:0;">順位・個人成績・試合結果を確認できます。</p>
      </a>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2 class="h2" style="margin:0 0 10px;">最新3件</h2>
      <div id="latestPosts" class="list" style="margin-top:8px;"></div>
      <p class="hint" style="margin:10px 0 0;">もっと見る → <a href="/posts/">メモ一覧</a> ／ タグから探す → <a href="/tags">タグ一覧</a></p>
    </div>
  </main>

    <footer class="wrap foot">
    <small>© 読売ジャイアンツ 良かったところメモ ・ <a href="/about">このサイトについて</a> ・ <a href="/contact">お問い合わせ</a> ・ <a href="/policy">プライバシーポリシー</a> ・ <a href="/disclaimer">免責事項</a></small>
  </footer>

<script>
(() => {
  const container = document.getElementById('latestPosts');
  if (!container) return;

  const trim = (s, n) => {
    const str = String(s || '');
    return str.length > n ? (str.slice(0, n) + '…') : str;
  };

  const render = (posts) => {
    container.innerHTML = '';
    const top = Array.isArray(posts) ? posts.slice(0, 3) : [];

    if (!top.length) {
      const empty = document.createElement('div');
      empty.className = 'meta';
      empty.textContent = 'まだメモがありません。';
      container.appendChild(empty);
      return;
    }

    top.forEach(p => {
      const card = document.createElement('div');
      card.className = 'card';

      const a = document.createElement('a');
      a.href = '/posts/' + (p.slug || '');
      const strong = document.createElement('strong');
      strong.textContent = p.title || '';
      a.appendChild(strong);
      card.appendChild(a);

      if (p.datetime) {
        const dt = document.createElement('div');
        dt.className = 'meta';
        dt.innerHTML = '<span></span>';
        dt.querySelector('span').textContent = p.datetime;
        card.appendChild(dt);
      }

      if (Array.isArray(p.tags) && p.tags.length) {
        const tags = document.createElement('div');
        tags.className = 'tags';
        p.tags.slice(0, 4).forEach(t => {
          const s = document.createElement('span');
          s.className = 'tag';
          s.textContent = t;
          tags.appendChild(s);
        });
        card.appendChild(tags);
      }

      if (p.excerpt) {
        const ex = document.createElement('div');
        ex.className = 'meta';
        ex.style.marginTop = '6px';
        ex.style.lineHeight = '1.4';
        ex.textContent = trim(p.excerpt, 90);
        card.appendChild(ex);
      }

      container.appendChild(card);
    });
  };

  fetch('/posts/posts.json', { cache: 'no-store' })
    .then(r => r.ok ? r.json() : Promise.reject(new Error('fetch failed')))
    .then(render)
    .catch(() => {
      container.innerHTML = '';
      const err = document.createElement('div');
      err.className = 'meta';
      err.textContent = '最新メモの読み込みに失敗しました。';
      container.appendChild(err);
    });
})();
</script>

</body>
</html>
